<!-- 0308 좌측 테이블 데이터 선택시 우측 테이블 데이터 조회를 해서 리스트를 뿌려줘야한다.
현재 데이터 뿌려주는것 까지 성공했으나. 컬럼 높이 조절이 필요한 상황이며 
가로로 1테이블 2테이블 붙여서 표시를 해야한다. -->



<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="/css.css">

</head>

<body>

  <div class="container">
    <div class="top">
      <span class="WorkUnit">
        <table class="styled-table">
          <thead>
            <tr>
              <th class="code"> 운동단위코드</th>
              <th> 운동단위</th>
            </tr>
          </thead>
          <tbody id="WorkUnit" class="scrollable"> 
          </tbody>
        </table>

        <table class="styled-table">
          <thead>
            <tr>
              <th class="code"> 운동코드</th>
              <th> 운동</th>
            </tr>
          </thead>
          <tbody id="work" class="scrollable"> 
          </tbody>
        </table>
      </span>

      <!-- <span class="WorkContent">

      </span> -->
    </div>

    <div class="bottom">하단 영역</div>
  </div>

  

</body>
<script src="/action.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
 $(document).ready(() => {
  $.ajax({
    type: 'GET',
    url: '/button',
    success: (data) => {
      const val = JSON.stringify(data);
      const valObject = JSON.parse(val);
      let test = "";

      valObject.forEach(element => {
        const work_unit_cd = element.work_unit_cd;
        const work_unit_nm = element.work_unit_nm;

        test += "<tr>"
        test += `<td class="code"> ${work_unit_cd} </td>`
        test += `<td data-code="${work_unit_cd}"> ${work_unit_nm} </td>`
        test += "</tr>"
      });
      $('#WorkUnit').html(test);

      



      $('td').click(function() {
        console.log($(this) + "/");
        const id = $(this).data('code');
        $.ajax({
          type: "GET",
          url: "/WorkList",
          data: { id: id },
          success: function(data) {
            const Val = JSON.stringify(data);
            const valObject = JSON.parse(Val);
            let test = "";

            valObject.forEach(elemet=>{
              const work_cd = elemet.work_cd;
              const work_nm = elemet.work_nm;
              test +="<tr>";
              test +=`<td class="code"> ${work_cd} </td>`
              test +=`<td> ${work_nm} </td>`
              test +="</tr>";
            });
            console.log(test);

            $('#work').html(test);
            

            // console.log(valObject);
          },
          error: function(xhr, status, error) {
            console.error(error);
          }
        });
      });
    },
    error: (xhr, status, error) => {
      console.error(error);
    }
  });
});

  

  // $('td').click(function() {
  // const id = $(this).data('id');



</script>


</html>